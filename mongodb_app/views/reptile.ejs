<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= reptile.name %> - reptile</title>
    <link rel="stylesheet" href="/style.css">
</head>

<body>
    <main class="reptile-page">
      <%- include('partials/nav') %>
      <%- include('partials/messages') %>
      
        <section class="reptile-form">
            <h2>Edit Reptile</h2>
            <form action="/api/reptiles/<%= reptile.id %>?_method=PATCH" method="POST">
              <label>Name:
                <input type="text" name="name" value="<%= reptile.name %>" required />
              </label>
          
              <label>Species:
                <input type="text" name="species" value="<%= reptile.species %>" required />
              </label>
          
              <label>Age:
                <input type="number" name="age" value="<%= reptile.age %>" min="0" required />
              </label><br/>
          
              <label>Habitat (comma-separated):
                <input type="text" name="habitat" 
                       value="<%= reptile.habitat ? reptile.habitat.join(', ') : '' %>" 
                       placeholder="e.g. desert, forest" required />
              </label>
          
              <label>Max Elevation (m):
                <input type="number" name="maxElevation" min="0" value="<%= reptile.maxElevation || '' %>" />
              </label><br/>
          
              <label>
                <input type="checkbox" name="isVenomous" <%= reptile.isVenomous ? 'checked' : '' %> />
                Venomous
              </label>
          
              <label>
                <input type="checkbox" name="isAdopted" <%= reptile.isAdopted ? 'checked' : '' %> />
                Adopted
              </label>
          
              <label>Adoption Date:
                <input type="date" name="adoptionDate" value="<%= reptile.adoptionDate ? reptile.adoptionDate.toISOString().split('T')[0] : '' %>" />
              </label>
          
              <label>Adopter Name:
                <input type="text" name="adopterName" value="<%= reptile.adopterName || '' %>" />
              </label><br/>
          
              <label>Adopter Contact:
                <input type="text" name="adopterContact" value="<%= reptile.adopterContact || '' %>" />
              </label>
          
              <label>Arrival Date:
                <input type="date" name="arrivalDate" value="<%= reptile.arrivalDate ? reptile.arrivalDate.toISOString().split('T')[0] : '' %>" required />
              </label>
          
              <label>Health Status:
                <input type="text" name="healthStatus" value="<%= reptile.healthStatus || '' %>" />
              </label>
          
              <label>
                <input type="checkbox" name="vaccinated" <%= reptile.vaccinated ? 'checked' : '' %> />
                Vaccinated
              </label>
          
              <label>Microchip ID:
                <input type="text" name="microchipId" value="<%= reptile.microchipId || '' %>" />
              </label>
          
              <button type="submit">Update Reptile</button>
            </form>
        
            <form action="/api/reptiles/<%= reptile.id %>?_method=DELETE" method="POST" onsubmit="return confirm('Are you sure you want to delete this reptile?')">
              <button type="submit">Delete Reptile</button>
            </form>
        </section>
        
        <section class="reptile-detail">
        <h1><%= reptile.name %></h1>
        <dl>
            <dt>Species:</dt>
            <dd><%= reptile.species %></dd>

            <dt>Age:</dt>
            <dd><%= reptile.age %> year<%= reptile.age !== 1 ? 's' : '' %></dd>

            <dt>Habitat(s):</dt>
            <dd>
            <% if (reptile.habitat && reptile.habitat.length > 0) { %>
                <%= reptile.habitat.join(', ') %>
            <% } else { %>
                Not specified
            <% } %>
            </dd>

            <dt>Max Elevation:</dt>
            <dd><%= reptile.maxElevation ? `${reptile.maxElevation} meters` : 'Not specified' %></dd>

            <dt>Arrival Date:</dt>
            <dd>
            <%= reptile.arrivalDate ? new Date(reptile.arrivalDate).toLocaleDateString() : 'Unknown' %>
            </dd>

            <dt>Health Status:</dt>
            <dd><%= reptile.healthStatus || 'Unknown' %></dd>

            <dt>Vaccinated:</dt>
            <dd><%= reptile.vaccinated ? '‚úÖ Yes' : '‚ùå No' %></dd>

            <dt>Venomous:</dt>
            <dd><%= reptile.isVenomous ? '‚ò†Ô∏è Yes' : 'No' %></dd>

            <dt>Microchip ID:</dt>
            <dd><%= reptile.microchipId || 'Not available' %></dd>

            <dt>Adoption Status:</dt>
            <dd>
            <% if (reptile.isAdopted) { %>
                ‚úÖ Adopted
                <% if (reptile.adoptionDate) { %>
                on <%= new Date(reptile.adoptionDate).toLocaleDateString() %>
                <% } %><br>
                <strong>Adopter:</strong> <%= reptile.adopterName || 'Unknown' %>
                (<%= reptile.adopterContact || 'No contact info' %>)
            <% } else { %>
                üêæ Available for adoption
            <% } %>
            </dd>
        </dl>
        </section>

    </main>

</body>

</html>
