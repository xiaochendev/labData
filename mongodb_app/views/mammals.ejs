<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>All Mammals</title>
    <link rel="stylesheet" href="../styles/style.css">
</head>
<body>
    <%- include('partials/nav') %>
    <%- include('partials/messages') %> 

    <main class="mammals-page">
      <!--  Form to Create New Mammal -->
      <section class="mammals-form">
        <h2>Create New Mammal</h2>
        <form action="/api/mammals" method="POST">
            <label for="name">Name:</label><br/>
            <input type="text" id="name" name="name" required><br/><br/>

            <label for="species">Species:</label><br/>
            <input type="text" id="species" name="species" required><br/><br/>

            <label for="age">Age (years):</label><br/>
            <input type="number" id="age" name="age" min="0" required><br/><br/>

            <label for="habitat">Habitat (comma separated):</label><br/>
            <input type="text" id="habitat" name="habitat" placeholder="e.g. forest, desert" required><br/><br/>

            <label for="arrivalDate">Arrival Date:</label><br/>
            <input type="date" id="arrivalDate" name="arrivalDate" required><br/><br/>

            <label for="healthStatus">Health Status:</label><br/>
            <input type="text" id="healthStatus" name="healthStatus" placeholder="e.g. healthy"><br/><br/>

            <label for="vaccinated">Vaccinated:</label>
            <input type="checkbox" id="vaccinated" name="vaccinated"><br/><br/>

            <label for="microchipId">Microchip ID:</label><br/>
            <input type="text" id="microchipId" name="microchipId"><br/><br/>

            <label for="isAdopted">Adopted:</label>
            <input type="checkbox" id="isAdopted" name="isAdopted"><br/><br/>

            <label for="adoptionDate">Adoption Date:</label><br/>
            <input type="date" id="adoptionDate" name="adoptionDate"><br/><br/>

            <label for="adopterName">Adopter Name:</label><br/>
            <input type="text" id="adopterName" name="adopterName"><br/><br/>

            <label for="adopterContact">Adopter Contact:</label><br/>
            <input type="text" id="adopterContact" name="adopterContact"><br/><br/>

            <button type="submit">Create Mammal</button>
        </form>
      </section>

      <!--  Mammals Listing -->
      <section class="mammals-section">
        <% if (mammals && mammals.length > 0) { %>
            <ul class="mammals-list">
                <% mammals.forEach(mammal => { %>
                    <li>
                        <a href="/api/mammals/<%= mammal._id %>">
                            <strong><%= mammal.name %></strong> â€” <%= mammal.species %>
                        </a>
                        <% if (mammal.isAdopted) { %>
                            <em>(Adopted)</em>
                        <% } else { %>
                            <em>(Available)</em>
                        <% } %>
                    </li>
                <% }) %>
            </ul>
        <% } else { %>
            <p>No mammals found.</p>
        <% } %>
      </section>

    </main>
</body>
</html>
