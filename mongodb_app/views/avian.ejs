<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= avian.name %> - avian</title>
    <link rel="stylesheet" href="/style.css">
</head>

<body>
    <%- include('partials/nav') %>
    <%- include('partials/messages') %>

    <main class="avian-page">
        <section class="avian-form">
            <h2>Edit avian</h2>
            <form action="/api/avians/<%= avian.id %>?_method=PATCH" method="POST">
                <label>Name: <input type="text" name="name" value="<%= avian.name %>" required /></label>
                <label>Species: <input type="text" name="species" value="<%= avian.species %>" required /></label>
                <label>Age: <input type="number" name="age" value="<%= avian.age %>" min="0" required /></label>
                <label>Habitat (comma-separated): 
                    <input type="text" name="habitat" 
                        value="<%= avian.habitat ? avian.habitat.join(', ') : '' %>" 
                        placeholder="e.g. desert, forest" required />
                </label>
                <label>
                    <input type="checkbox" name="isAdopted" <%= avian.isAdopted ? "checked" : "" %> />
                    Adopted
                </label>
                <label>Adoption Date:
                    <input type="date" name="adoptionDate" value="<%= avian.adoptionDate ? avian.adoptionDate.toISOString().split('T')[0] : '' %>" />
                </label>
                <label>Adopter Name:
                    <input type="text" name="adopterName" value="<%= avian.adopterName || '' %>" />
                </label>
                <label>Adopter Contact:
                    <input type="text" name="adopterContact" value="<%= avian.adopterContact || '' %>" />
                </label>
                <label>Arrival Date:
                    <input type="date" name="arrivalDate" value="<%= avian.arrivalDate ? avian.arrivalDate.toISOString().split('T')[0] : '' %>" required />
                </label>
                <label>Health Status:
                    <input type="text" name="healthStatus" value="<%= avian.healthStatus || '' %>" />
                </label>
                <label>
                    <input type="checkbox" name="vaccinated" <%= avian.vaccinated ? "checked" : "" %> />
                    Vaccinated
                </label>
                <label>Microchip ID:
                    <input type="text" name="microchipId" value="<%= avian.microchipId || '' %>" />
                </label>
                <button type="submit">Update avian</button>
            </form>

            <form action="/api/avians/<%= avian.id %>?_method=DELETE" method="POST" onsubmit="return confirm('Are you sure?')">
                <button type="submit">Delete avian</button>
            </form>
        </section>
        
        <section class="avian-detail">
            <h1><%= avian.name %></h1>
            <dl>
              <dt>Species:</dt>
              <dd><%= avian.species %></dd>
            
              <dt>Age:</dt>
              <dd><%= avian.age %> years</dd>
            
              <dt>Habitat(s):</dt>
              <dd>
                <% if (avian.habitat && avian.habitat.length > 0) { %>
                  <%= avian.habitat.join(', ') %>
                <% } else { %>
                  Not specified
                <% } %>
              </dd>
          
              <dt>Arrival Date:</dt>
              <dd>
                <%= avian.arrivalDate ? new Date(avian.arrivalDate).toLocaleDateString() : 'Unknown' %>
              </dd>
          
              <dt>Health Status:</dt>
              <dd><%= avian.healthStatus || 'Unknown' %></dd>
          
              <dt>Vaccinated:</dt>
              <dd><%= avian.vaccinated ? 'Yes' : 'No' %></dd>
          
              <dt>Microchip ID:</dt>
              <dd><%= avian.microchipId || 'Not available' %></dd>
          
              <dt>Adoption Status:</dt>
              <dd>
                <% if (avian.isAdopted) { %>
                  ‚úÖ Adopted
                  <% if (avian.adoptionDate) { %> on <%= new Date(avian.adoptionDate).toLocaleDateString() %><% } %>
                  <br>
                  <strong>Adopter:</strong> <%= avian.adopterName || 'Unknown' %> (<%= avian.adopterContact || 'No contact info' %>)
                <% } else { %>
                  üêæ Available for adoption
                <% } %>
              </dd>
            </dl>
        </section>
    </main>

</body>

</html>
