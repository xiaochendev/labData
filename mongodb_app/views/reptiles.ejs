<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Reptiles</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <main class="reptiles-page">
      <%- include('partials/nav') %>
      <%- include('partials/messages') %> 

      <!-- Create Form -->
      <section class="reptiles-form">
        <h2>Create New Reptile</h2>
        <form action="/api/reptiles" method="POST">
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" value="<%= formData.name || '' %>" required>

            <label for="species">Species:</label>
            <input type="text" id="species" name="species">

            <label for="age">Age (in years):</label>
            <input type="number" id="age" name="age" min="0" value="<%= formData.age || '' %>"><br/>

            <label for="habitat">Habitat (comma-separated):</label>
            <input type="text" id="habitat" name="habitat" value="<%= formData.habitat || '' %>" placeholder=" ex. desert, forest, wetland, grassland, tropical, aquatic" required>

            <label for="isVenomous">Venomous:</label>
            <input type="checkbox" id="isVenomous" name="isVenomous">

            <label for="maxElevation">Max Elevation (m):</label>
            <input type="number" id="maxElevation" name="maxElevation" min="0">

            <label for="isAdopted">Adopted:</label>
            <input type="checkbox" id="isAdopted" name="isAdopted" <%= formData.isAdopted ? 'checked' : '' %> >

            <label for="adoptionDate">Adoption Date:</label>
            <input type="date" id="adoptionDate" name="adoptionDate">

            <label for="adopterName">Adopter Name:</label>
            <input type="text" id="adopterName" name="adopterName"><br/>

            <label for="adopterContact">Adopter Contact:</label>
            <input type="text" id="adopterContact" name="adopterContact">

            <label for="arrivalDate">Arrival Date:</label>
            <input type="date" id="arrivalDate" name="arrivalDate" value="<%= formData.arrivalDate || '' %>">

            <label for="healthStatus">Health Status:</label>
            <input type="text" id="healthStatus" name="healthStatus">

            <label for="vaccinated">Vaccinated:</label>
            <input type="checkbox" id="vaccinated" name="vaccinated">

            <label for="microchipId">Microchip ID:</label>
            <input type="text" id="microchipId" name="microchipId">

            <button type="submit">Create Reptile</button>
        </form>
      </section>

      <!--  List View -->
      <section class="reptiles-section">
        <% if (reptiles && reptiles.length > 0) { %>
          <ul class="reptiles-list">
            <% reptiles.forEach(reptile => { %>
              <li>
                <a href="/api/reptiles/<%= reptile._id %>">
                  <strong><%= reptile.name %></strong> â€” <%= reptile.species %>
                </a>
                <span> | Age: <%= reptile.age %> | 
                <% if (reptile.isVenomous) { %>
                     Venomous
                <% } else { %>
                     Non-venomous
                <% } %>
                </span>
                <% if (reptile.isAdopted) { %>
                    <em>(Adopted)</em>
                <% } else { %>
                    <em>(Available)</em>
                <% } %>
              </li>
            <% }) %>
          </ul>
        <% } else { %>
          <p>No reptiles found.</p>
        <% } %>
      </section>
    </main>
</body>
</html>
